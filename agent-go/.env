# Plum Agent 配置文件示例
# 复制此文件为 .env 并修改配置

# ========== 节点配置 ==========

# 节点ID（唯一标识）
AGENT_NODE_ID=nodeA

# Controller地址（默认使用主机名 plum-controller，可在 /etc/hosts 或 DNS 中配置）
CONTROLLER_BASE=http://plum-controller:8080

# Agent对外通告的IP（请填写该节点的内网/业务IP）
AGENT_IP=192.168.1.2

# Agent数据目录
AGENT_DATA_DIR=/tmp/plum-agent

# Agent同步间隔（单位：秒），默认5
SYNC_INTERVAL_SEC=3

# ========== 应用运行模式 ==========

# 应用运行模式：process（进程模式，默认）或 docker（容器模式）
# process: 应用以进程方式运行（传统模式）
# docker: 应用以Docker容器方式运行（需要挂载Docker socket）
AGENT_RUN_MODE=process

# ========== 容器模式配置（仅当 AGENT_RUN_MODE=docker 时生效）==========

# 容器基础镜像（默认：alpine:latest）
# 所有应用容器将基于此镜像运行
#PLUM_BASE_IMAGE=alpine:latest
PLUM_BASE_IMAGE=ubuntu:22.04
#PLUM_BASE_IMAGE=kylin/kylin:v10-release-020
#PLUM_BASE_IMAGE=openeuler/openeuler:22.03-lts-sp4

# 容器内存限制（可选）
# 支持格式：512m, 1g, 2048 (字节)
# 不设置表示无限制
# PLUM_CONTAINER_MEMORY=512m

# 容器CPU限制（可选）
# 支持格式：1.0, 2, 0.5 (CPU核数)
# 不设置表示无限制
# PLUM_CONTAINER_CPUS=1.0

# 容器自定义环境变量（可选）
# 格式：KEY1=value1,KEY2=value2
# 例如：DISPLAY=:99,QT_QPA_PLATFORM=xcb
#PLUM_CONTAINER_ENV=DISPLAY=:99

# 容器网络模式（可选）
# 支持的值：host, bridge, none
# host: 使用宿主机网络（容器直接使用宿主机的网络栈，无需端口映射和主机映射）
# bridge: 使用 Docker bridge 网络（默认，需要端口映射和主机映射）
# none: 无网络
# 注意：使用 host 模式时，容器可以直接访问 localhost 和宿主机上的所有服务
# 推荐：如果 Controller 在本地运行，使用 host 模式可以避免网络配置问题
PLUM_CONTAINER_NETWORK_MODE=host

# Controller 主机地址（仅当 CONTROLLER_BASE 使用 localhost/127.0.0.1 时生效）
# 当应用运行在容器中时，无法直接访问 localhost，需要指定 Controller 的实际 IP
# 默认值：172.17.0.1（Docker 默认网关 IP）
# 如果 Controller 在其他机器上，请设置为 Controller 的实际 IP
PLUM_CONTROLLER_HOST=172.17.0.1

# 宿主机库路径映射（可选，用于共享系统库）
# 格式：/path1,/path2,/path3
# 例如：/usr/lib,/usr/local/lib,/opt/qt/lib
# 这些路径会被只读挂载到容器的相同路径
# 适用于：多个应用需要共享相同的系统库（如Qt）
# 注意：需要确保宿主机和容器架构兼容（都是x86_64或都是ARM64）
PLUM_HOST_LIB_PATHS=/usr/lib,/usr/local/lib,/usr/lib/x86_64-linux-gnu
#PLUM_HOST_LIB_PATHS=/usr/lib,/usr/local/lib,/usr/lib/aarch64-linux-gnu
#PLUM_HOST_LIB_PATHS=/usr/lib,/usr/lib64
