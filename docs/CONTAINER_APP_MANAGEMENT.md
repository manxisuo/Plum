# Plum å®¹å™¨åŒ–åº”ç”¨ç®¡ç†æ–‡æ¡£

## ðŸ“‹ æ¦‚è¿°

Plum æ”¯æŒå¯¹åº”ç”¨è¿›è¡Œä¸¤ç§å½¢æ€çš„ç®¡ç†ï¼š
- **è£¸åº”ç”¨ï¼ˆProcessï¼‰**ï¼šåº”ç”¨ä»¥æ“ä½œç³»ç»Ÿè¿›ç¨‹æ–¹å¼è¿è¡Œ
- **å®¹å™¨åº”ç”¨ï¼ˆContainerï¼‰**ï¼šåº”ç”¨ä»¥ Docker å®¹å™¨æ–¹å¼è¿è¡Œ

é€šè¿‡çµæ´»çš„è¿è¡Œæ¨¡å¼é…ç½®ï¼ŒPlum æ”¯æŒä¸‰ç§éƒ¨ç½²æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚

---

## ðŸŽ¯ æ ¸å¿ƒç‰¹æ€§

### åŒæ¨¡å¼åº”ç”¨ç®¡ç†

Plum Agent é€šè¿‡ç»Ÿä¸€çš„ `AppManager` æŽ¥å£ï¼Œæ”¯æŒä¸¤ç§åº”ç”¨è¿è¡Œæ¨¡å¼ï¼š

| ç‰¹æ€§ | è¿›ç¨‹æ¨¡å¼ï¼ˆProcessï¼‰ | å®¹å™¨æ¨¡å¼ï¼ˆDockerï¼‰ |
|------|-------------------|-------------------|
| **è¿è¡Œæ–¹å¼** | æ“ä½œç³»ç»Ÿè¿›ç¨‹ | Docker å®¹å™¨ |
| **èµ„æºéš”ç¦»** | å…±äº« Agent èµ„æº | ç‹¬ç«‹èµ„æºé™åˆ¶ |
| **çŽ¯å¢ƒéš”ç¦»** | å…±äº« Agent çŽ¯å¢ƒ | ç‹¬ç«‹å®¹å™¨çŽ¯å¢ƒ |
| **ä¾èµ–ç®¡ç†** | éœ€è¦é¢„è£…ä¾èµ– | å®¹å™¨é•œåƒåŒ…å«ä¾èµ– |
| **å®‰å…¨æ€§** | ä¸­ç­‰ | é«˜ï¼ˆå®¹å™¨éš”ç¦»ï¼‰ |
| **å¯åŠ¨é€Ÿåº¦** | å¿«ï¼ˆ~100msï¼‰ | ä¸­ç­‰ï¼ˆ~500msï¼‰ |
| **èµ„æºå¼€é”€** | ä½Ž | ä¸­ç­‰ï¼ˆ~10-50MB/å®¹å™¨ï¼‰ |
| **é€‚ç”¨åœºæ™¯** | å•æœºéƒ¨ç½²ã€ç®€å•çŽ¯å¢ƒ | ç”Ÿäº§çŽ¯å¢ƒã€å¤šç§Ÿæˆ· |

### ä¸‰ç§éƒ¨ç½²æ–¹å¼

æ ¹æ® Controllerã€Agent å’Œåº”ç”¨çš„è¿è¡Œå½¢æ€ï¼ŒPlum æ”¯æŒä¸‰ç§éƒ¨ç½²ç»„åˆï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸‰ç§éƒ¨ç½²æ–¹å¼å¯¹æ¯”                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹å¼1: è£¸åº”ç”¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰                                      â”‚
â”‚   - Controller: ç›´æŽ¥è¿è¡Œ                                     â”‚
â”‚   - Agent: ç›´æŽ¥è¿è¡Œ                                          â”‚
â”‚   - App: è¿›ç¨‹æ¨¡å¼è¿è¡Œ                                        â”‚
â”‚   é€‚ç”¨: å¼€å‘çŽ¯å¢ƒã€ç®€å•éƒ¨ç½²                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹å¼2: æ··åˆå®¹å™¨æ¨¡å¼                                           â”‚
â”‚   - Controller: ç›´æŽ¥è¿è¡Œ                                     â”‚
â”‚   - Agent: ç›´æŽ¥è¿è¡Œ                                          â”‚
â”‚   - App: å®¹å™¨æ¨¡å¼è¿è¡Œ                                        â”‚
â”‚   é€‚ç”¨: éœ€è¦å®¹å™¨éš”ç¦»çš„åº”ç”¨ï¼Œä½†Controller/Agentä¿æŒç®€å•éƒ¨ç½²     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–¹å¼3: å®Œå…¨å®¹å™¨åŒ–ï¼ˆæŽ¨èç”Ÿäº§çŽ¯å¢ƒï¼‰                              â”‚
â”‚   - Controller: å®¹å™¨è¿è¡Œ                                    â”‚
â”‚   - Agent: å®¹å™¨è¿è¡Œ                                         â”‚
â”‚   - App: å®¹å™¨æ¨¡å¼è¿è¡Œ                                       â”‚
â”‚   é€‚ç”¨: ç”Ÿäº§çŽ¯å¢ƒã€äº‘åŽŸç”Ÿéƒ¨ç½²                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ—ï¸ æž¶æž„è®¾è®¡

### åº”ç”¨ç®¡ç†å™¨æŽ¥å£

Plum Agent é€šè¿‡ç»Ÿä¸€çš„ `AppManager` æŽ¥å£ç®¡ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸï¼š

```go
type AppManager interface {
    // å¯åŠ¨åº”ç”¨
    StartApp(instanceID string, app Assignment, appDir string) error
    
    // åœæ­¢åº”ç”¨
    StopApp(instanceID string) error
    
    // æ£€æŸ¥åº”ç”¨æ˜¯å¦è¿è¡Œ
    IsRunning(instanceID string) bool
    
    // èŽ·å–åº”ç”¨çŠ¶æ€
    GetStatus(instanceID string) (AppStatus, error)
}
```

### å®žçŽ°æž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Plum Agent                      â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   AppManager Interface            â”‚  â”‚
â”‚  â”‚   (ç»Ÿä¸€çš„åº”ç”¨ç®¡ç†æŽ¥å£)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚             â”‚               â”‚            â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ ProcessManager â”‚  â”‚ DockerManagerâ”‚ â”‚
â”‚    â”‚ (è¿›ç¨‹æ¨¡å¼)     â”‚  â”‚ (å®¹å™¨æ¨¡å¼)   â”‚ â”‚
â”‚    â”‚                â”‚  â”‚              â”‚ â”‚
â”‚    â”‚ fork/exec      â”‚  â”‚ docker run   â”‚ â”‚
â”‚    â”‚ è¿›ç¨‹ç®¡ç†       â”‚  â”‚ å®¹å™¨ç®¡ç†     â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸš€ éƒ¨ç½²æ–¹å¼è¯¦è§£

### æ–¹å¼1ï¼šè£¸åº”ç”¨æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰

**ç‰¹ç‚¹**ï¼šæ‰€æœ‰ç»„ä»¶éƒ½ä»¥è¿›ç¨‹æ–¹å¼ç›´æŽ¥è¿è¡Œï¼Œæœ€ç®€å•ã€æœ€å¿«é€Ÿã€‚

#### æž¶æž„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸»æœºç³»ç»Ÿ                          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Controller è¿›ç¨‹                â”‚ â”‚
â”‚  â”‚ (GoäºŒè¿›åˆ¶ï¼Œç«¯å£8080)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Agent è¿›ç¨‹                    â”‚ â”‚
â”‚  â”‚ (GoäºŒè¿›åˆ¶ï¼Œç®¡ç†åº”ç”¨)          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                          â”‚
â”‚         â”‚ fork/exec                â”‚
â”‚         â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ App1 è¿›ç¨‹                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ App2 è¿›ç¨‹                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é…ç½®

```bash
# æ–¹å¼1ï¼šä½¿ç”¨é»˜è®¤é…ç½®ï¼ˆè¿›ç¨‹æ¨¡å¼ï¼‰
./agent-go/plum-agent

# æ–¹å¼2ï¼šæ˜¾å¼è®¾ç½®è¿›ç¨‹æ¨¡å¼
AGENT_RUN_MODE=process ./agent-go/plum-agent

# æ–¹å¼3ï¼šä½¿ç”¨ .env æ–‡ä»¶
# agent-go/.env
AGENT_RUN_MODE=process
CONTROLLER_BASE=http://127.0.0.1:8080
AGENT_NODE_ID=nodeA
```

#### é€‚ç”¨åœºæ™¯

- âœ… å¼€å‘çŽ¯å¢ƒ
- âœ… å•æœºéƒ¨ç½²
- âœ… èµ„æºå—é™çŽ¯å¢ƒ
- âœ… å¿«é€Ÿæµ‹è¯•å’Œè°ƒè¯•

#### ä¼˜åŠ¿

- å¯åŠ¨é€Ÿåº¦å¿«ï¼ˆæ— éœ€å®¹å™¨å¯åŠ¨å¼€é”€ï¼‰
- èµ„æºå ç”¨ä½Ž
- è°ƒè¯•æ–¹ä¾¿ï¼ˆå¯ç›´æŽ¥æŸ¥çœ‹è¿›ç¨‹ï¼‰
- æ— éœ€ Docker ä¾èµ–

#### åŠ£åŠ¿

- èµ„æºéš”ç¦»ä¸è¶³
- ä¾èµ–å†²çªé£Žé™©
- å®‰å…¨æ€§è¾ƒä½Ž

---

### æ–¹å¼2ï¼šæ··åˆå®¹å™¨æ¨¡å¼

**ç‰¹ç‚¹**ï¼šController å’Œ Agent ç›´æŽ¥è¿è¡Œï¼Œä½†åº”ç”¨ä»¥å®¹å™¨æ–¹å¼è¿è¡Œï¼Œå®žçŽ°åº”ç”¨çš„èµ„æºéš”ç¦»ã€‚

#### æž¶æž„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸»æœºç³»ç»Ÿ                          â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Controller è¿›ç¨‹                â”‚ â”‚
â”‚  â”‚ (GoäºŒè¿›åˆ¶ï¼Œç«¯å£8080)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Agent è¿›ç¨‹                    â”‚ â”‚
â”‚  â”‚ (GoäºŒè¿›åˆ¶ï¼ŒDocker API)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                       â”‚
â”‚             â”‚ Docker API            â”‚
â”‚             â”‚                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    â”‚ App1 å®¹å™¨      â”‚  â”‚ App2 å®¹å™¨ â”‚ â”‚
â”‚    â”‚ (ç‹¬ç«‹èµ„æº)     â”‚  â”‚ (ç‹¬ç«‹èµ„æº)â”‚ â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é…ç½®

```bash
# æ–¹å¼1ï¼šçŽ¯å¢ƒå˜é‡è®¾ç½®
AGENT_RUN_MODE=docker ./agent-go/plum-agent

# æ–¹å¼2ï¼šä½¿ç”¨ .env æ–‡ä»¶
# agent-go/.env
AGENT_RUN_MODE=docker
CONTROLLER_BASE=http://127.0.0.1:8080
AGENT_NODE_ID=nodeA
PLUM_BASE_IMAGE=alpine:latest
PLUM_CONTAINER_MEMORY=512m
PLUM_CONTAINER_CPUS=1.0
```

#### å‰ç½®æ¡ä»¶

1. **Docker å¿…é¡»è¿è¡Œ**
   ```bash
   docker --version  # ç¡®è®¤Dockerå·²å®‰è£…
   systemctl status docker  # ç¡®è®¤DockeræœåŠ¡è¿è¡Œ
   ```

2. **Agent éœ€è¦è®¿é—® Docker Socket**
   - Agent è¿›ç¨‹éœ€è¦æœ‰æƒé™è®¿é—® `/var/run/docker.sock`
   - æˆ–è€… Agent ç”¨æˆ·éœ€è¦åŠ å…¥ `docker` ç»„ï¼š
     ```bash
     sudo usermod -aG docker $USER
     # é‡æ–°ç™»å½•ä½¿æƒé™ç”Ÿæ•ˆ
     ```

#### é€‚ç”¨åœºæ™¯

- âœ… éœ€è¦å®¹å™¨éš”ç¦»çš„åº”ç”¨
- âœ… ä¸åŒåº”ç”¨æœ‰ä¸åŒä¾èµ–éœ€æ±‚
- âœ… éœ€è¦ç²¾ç¡®çš„èµ„æºæŽ§åˆ¶
- âœ… Controller/Agent ä¿æŒç®€å•éƒ¨ç½²

#### ä¼˜åŠ¿

- åº”ç”¨èµ„æºéš”ç¦»å®Œå–„
- çŽ¯å¢ƒéš”ç¦»ï¼Œé¿å…ä¾èµ–å†²çª
- ç²¾ç¡®çš„èµ„æºé™åˆ¶ï¼ˆCPUã€å†…å­˜ï¼‰
- Controller/Agent ä¿æŒç®€å•

#### åŠ£åŠ¿

- éœ€è¦ Docker è¿è¡Œ
- å®¹å™¨å¯åŠ¨æœ‰é¢å¤–å¼€é”€
- Agent éœ€è¦ Docker æƒé™

---

### æ–¹å¼3ï¼šå®Œå…¨å®¹å™¨åŒ–ï¼ˆæŽ¨èç”Ÿäº§çŽ¯å¢ƒï¼‰

**ç‰¹ç‚¹**ï¼šæ‰€æœ‰ç»„ä»¶éƒ½åœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œå®žçŽ°å®Œå…¨å®¹å™¨åŒ–éƒ¨ç½²ã€‚

#### æž¶æž„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Docker çŽ¯å¢ƒ                        â”‚
â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Controller å®¹å™¨                  â”‚ â”‚
â”‚  â”‚ (ç«¯å£8080æ˜ å°„åˆ°ä¸»æœº)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Agent å®¹å™¨                       â”‚ â”‚
â”‚  â”‚ (æŒ‚è½½Docker socket)             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                         â”‚
â”‚             â”‚ Docker API             â”‚
â”‚             â”‚                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚ App1 å®¹å™¨      â”‚  â”‚ App2 å®¹å™¨ â”‚   â”‚
â”‚    â”‚ (ç‹¬ç«‹èµ„æº)     â”‚  â”‚ (ç‹¬ç«‹èµ„æº)â”‚   â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é…ç½®ï¼ˆdocker-compose.ymlï¼‰

```yaml
version: '3.8'

services:
  plum-controller:
    build:
      context: .
      dockerfile: docker/controller/Dockerfile
    container_name: plum-controller
    ports:
      - "8080:8080"
    volumes:
      - plum-data:/app/data
    environment:
      - CONTROLLER_ADDR=:8080
    networks:
      - plum-network

  plum-agent-a:
    build:
      context: .
      dockerfile: docker/agent/Dockerfile
    container_name: plum-agent-a
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock  # Docker socket
      - plum-agent-a-data:/app/data
    environment:
      - AGENT_NODE_ID=nodeA
      - CONTROLLER_BASE=http://plum-controller:8080
      - AGENT_RUN_MODE=docker  # å®¹å™¨æ¨¡å¼
      - PLUM_BASE_IMAGE=alpine:latest
      - PLUM_CONTAINER_MEMORY=512m
      - PLUM_CONTAINER_CPUS=1.0
    networks:
      - plum-network
    depends_on:
      - plum-controller

networks:
  plum-network:
    driver: bridge

volumes:
  plum-data:
  plum-agent-a-data:
```

#### å¯åŠ¨

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f plum-agent-a

# åœæ­¢æœåŠ¡
docker-compose down
```

#### é€‚ç”¨åœºæ™¯

- âœ… ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²
- âœ… äº‘åŽŸç”ŸçŽ¯å¢ƒ
- âœ… Kubernetes/Docker Swarm
- âœ… å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²

#### ä¼˜åŠ¿

- å®Œå…¨å®¹å™¨åŒ–ï¼Œæ˜“äºŽç®¡ç†
- çŽ¯å¢ƒä¸€è‡´æ€§
- æ˜“äºŽæ‰©å±•å’Œè¿ç§»
- ç¬¦åˆäº‘åŽŸç”Ÿæœ€ä½³å®žè·µ

#### åŠ£åŠ¿

- éœ€è¦å®Œæ•´çš„ Docker çŽ¯å¢ƒ
- èµ„æºå¼€é”€è¾ƒå¤§
- ç½‘ç»œé…ç½®ç¨å¤æ‚

---

## âš™ï¸ é…ç½®è¯´æ˜Ž

### çŽ¯å¢ƒå˜é‡

#### åŸºç¡€é…ç½®

| å˜é‡å | è¯´æ˜Ž | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|--------|------|--------|------|
| `AGENT_NODE_ID` | èŠ‚ç‚¹ID | `nodeA` | `nodeA`, `nodeB` |
| `CONTROLLER_BASE` | Controlleråœ°å€ | `http://127.0.0.1:8080` | `http://localhost:8080` |
| `AGENT_DATA_DIR` | Agentæ•°æ®ç›®å½• | `/tmp/plum-agent` | `/var/lib/plum-agent` |

#### è¿è¡Œæ¨¡å¼é…ç½®

| å˜é‡å | è¯´æ˜Ž | å¯é€‰å€¼ | é»˜è®¤å€¼ |
|--------|------|--------|--------|
| `AGENT_RUN_MODE` | åº”ç”¨è¿è¡Œæ¨¡å¼ | `process`, `docker` | `process` |

#### å®¹å™¨æ¨¡å¼é…ç½®ï¼ˆä»…å½“ `AGENT_RUN_MODE=docker` æ—¶ç”Ÿæ•ˆï¼‰

| å˜é‡å | è¯´æ˜Ž | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|--------|------|--------|------|
| `PLUM_BASE_IMAGE` | å®¹å™¨åŸºç¡€é•œåƒ | `alpine:latest` | `ubuntu:22.04`, `python:3.11` |
| `PLUM_CONTAINER_MEMORY` | å®¹å™¨å†…å­˜é™åˆ¶ | æ— é™åˆ¶ | `512m`, `1g`, `2048` |
| `PLUM_CONTAINER_CPUS` | å®¹å™¨CPUé™åˆ¶ | æ— é™åˆ¶ | `1.0`, `2`, `0.5` |

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

#### æ–¹å¼1ï¼šè£¸åº”ç”¨æ¨¡å¼ï¼ˆ.envï¼‰

```bash
# agent-go/.env
AGENT_NODE_ID=nodeA
CONTROLLER_BASE=http://127.0.0.1:8080
AGENT_DATA_DIR=/tmp/plum-agent

# æ˜¾å¼æŒ‡å®šè¿›ç¨‹æ¨¡å¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤å€¼ï¼‰
AGENT_RUN_MODE=process
```

#### æ–¹å¼2ï¼šæ··åˆå®¹å™¨æ¨¡å¼ï¼ˆ.envï¼‰

```bash
# agent-go/.env
AGENT_NODE_ID=nodeA
CONTROLLER_BASE=http://127.0.0.1:8080
AGENT_DATA_DIR=/tmp/plum-agent

# ä½¿ç”¨å®¹å™¨æ¨¡å¼
AGENT_RUN_MODE=docker

# å®¹å™¨é…ç½®
PLUM_BASE_IMAGE=alpine:latest
PLUM_CONTAINER_MEMORY=512m
PLUM_CONTAINER_CPUS=1.0
```

#### æ–¹å¼3ï¼šå®Œå…¨å®¹å™¨åŒ–ï¼ˆdocker-compose.ymlï¼‰

```yaml
services:
  plum-agent-a:
    environment:
      - AGENT_NODE_ID=nodeA
      - CONTROLLER_BASE=http://plum-controller:8080
      - AGENT_RUN_MODE=docker
      - PLUM_BASE_IMAGE=alpine:latest
      - PLUM_CONTAINER_MEMORY=512m
      - PLUM_CONTAINER_CPUS=1.0
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
```

---

## ðŸ“ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå¼€å‘çŽ¯å¢ƒï¼ˆè£¸åº”ç”¨æ¨¡å¼ï¼‰

```bash
# 1. å¯åŠ¨ Controller
cd /home/stone/code/Plum
make controller
make controller-run  # ç»ˆç«¯1

# 2. å¯åŠ¨ Agentï¼ˆè¿›ç¨‹æ¨¡å¼ï¼‰
make agent
make agent-run  # ç»ˆç«¯2

# 3. åˆ›å»ºéƒ¨ç½²ï¼ˆåº”ç”¨å°†ä»¥è¿›ç¨‹æ–¹å¼è¿è¡Œï¼‰
curl -X POST http://127.0.0.1:8080/v1/deployments \
  -H "Content-Type: application/json" \
  -d '{
    "name": "demo-app",
    "entries": [{
      "artifactUrl": "/artifacts/demo-app.zip",
      "replicas": {"nodeA": 1}
    }]
  }'
```

### ç¤ºä¾‹2ï¼šæ··åˆå®¹å™¨æ¨¡å¼

```bash
# 1. å¯åŠ¨ Controllerï¼ˆç›´æŽ¥è¿è¡Œï¼‰
make controller
make controller-run  # ç»ˆç«¯1

# 2. é…ç½® Agent ä½¿ç”¨å®¹å™¨æ¨¡å¼
cd agent-go
cat > .env << EOF
AGENT_NODE_ID=nodeA
CONTROLLER_BASE=http://127.0.0.1:8080
AGENT_RUN_MODE=docker
PLUM_BASE_IMAGE=alpine:latest
PLUM_CONTAINER_MEMORY=512m
PLUM_CONTAINER_CPUS=1.0
EOF

# 3. ç¡®ä¿ Docker è¿è¡Œ
sudo systemctl start docker

# 4. å¯åŠ¨ Agent
cd ..
make agent
AGENT_RUN_MODE=docker ./agent-go/plum-agent  # ç»ˆç«¯2

# 5. åˆ›å»ºéƒ¨ç½²ï¼ˆåº”ç”¨å°†ä»¥å®¹å™¨æ–¹å¼è¿è¡Œï¼‰
curl -X POST http://127.0.0.1:8080/v1/deployments \
  -H "Content-Type: application/json" \
  -d '{
    "name": "demo-app",
    "entries": [{
      "artifactUrl": "/artifacts/demo-app.zip",
      "replicas": {"nodeA": 1}
    }]
  }'
```

### ç¤ºä¾‹3ï¼šå®Œå…¨å®¹å™¨åŒ–éƒ¨ç½²

```bash
# 1. é…ç½® docker-compose.yml
# ï¼ˆè§ä¸Šé¢çš„é…ç½®ç¤ºä¾‹ï¼‰

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. æŸ¥çœ‹ Agent æ—¥å¿—
docker-compose logs -f plum-agent-a

# 4. åº”ç”¨ä¼šè‡ªåŠ¨ä»¥å®¹å™¨æ–¹å¼è¿è¡Œ
# å¯é€šè¿‡ docker ps æŸ¥çœ‹è¿è¡Œä¸­çš„åº”ç”¨å®¹å™¨
docker ps | grep plum-app-
```

---

## ðŸ” å®¹å™¨ç®¡ç†ç»†èŠ‚

### å®¹å™¨ç”Ÿå‘½å‘¨æœŸ

1. **åˆ›å»ºå®¹å™¨**
   - Agent ä¸‹è½½å¹¶è§£åŽ‹ artifact
   - åŸºäºŽé…ç½®çš„åŸºç¡€é•œåƒåˆ›å»ºå®¹å™¨
   - æŒ‚è½½åº”ç”¨ç›®å½•åˆ°å®¹å™¨çš„ `/app`
   - è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼ˆPLUM_INSTANCE_ID ç­‰ï¼‰

2. **å¯åŠ¨å®¹å™¨**
   - æ‰§è¡Œåº”ç”¨å¯åŠ¨å‘½ä»¤
   - ç›‘æŽ§å®¹å™¨çŠ¶æ€

3. **åœæ­¢å®¹å™¨**
   - å‘é€ SIGTERM ä¿¡å·ï¼ˆä¼˜é›…åœæ­¢ï¼‰
   - ç­‰å¾…æœ€å¤š 5 ç§’
   - å¼ºåˆ¶åˆ é™¤å®¹å™¨ï¼ˆå¦‚æžœæœªåœæ­¢ï¼‰

### å®¹å™¨å‘½åè§„èŒƒ

- åº”ç”¨å®¹å™¨ï¼š`plum-app-{instanceID}`
- Agent å®¹å™¨ï¼š`plum-agent-{nodeID}`
- Controller å®¹å™¨ï¼š`plum-controller`

### å®¹å™¨èµ„æºé™åˆ¶

#### å†…å­˜é™åˆ¶

æ”¯æŒæ ¼å¼ï¼š
- `512m` - 512 MB
- `1g` - 1 GB
- `2048` - 2048 å­—èŠ‚ï¼ˆä¸æŽ¨èï¼‰

ç¤ºä¾‹ï¼š
```bash
PLUM_CONTAINER_MEMORY=512m
```

#### CPU é™åˆ¶

æ”¯æŒæ ¼å¼ï¼š
- `1.0` - 1 ä¸ª CPU æ ¸
- `2` - 2 ä¸ª CPU æ ¸
- `0.5` - 0.5 ä¸ª CPU æ ¸

ç¤ºä¾‹ï¼š
```bash
PLUM_CONTAINER_CPUS=1.0
```

### å®¹å™¨ç½‘ç»œ

- é»˜è®¤ä½¿ç”¨ Docker bridge ç½‘ç»œ
- å®¹å™¨å†…åº”ç”¨å¯ä»¥é€šè¿‡ `plum-controller:8080` è®¿é—® Controllerï¼ˆåœ¨å®¹å™¨çŽ¯å¢ƒä¸­ï¼‰
- åº”ç”¨å®¹å™¨ä¹‹é—´é»˜è®¤éš”ç¦»ï¼ˆé™¤éžé…ç½®å…±äº«ç½‘ç»œï¼‰

### å®¹å™¨æ—¥å¿—

å®¹å™¨æ—¥å¿—å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹ï¼š

```bash
# æŸ¥çœ‹ç‰¹å®šåº”ç”¨å®¹å™¨æ—¥å¿—
docker logs plum-app-{instanceID}

# æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—
docker logs --tail 100 plum-app-{instanceID}

# å®žæ—¶è·Ÿè¸ªæ—¥å¿—
docker logs -f plum-app-{instanceID}
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨é—®é¢˜

1. **Docker Socket æŒ‚è½½é£Žé™©**
   ```yaml
   volumes:
     - /var/run/docker.sock:/var/run/docker.sock
   ```
   - Agent æ‹¥æœ‰å®Œæ•´çš„ Docker æŽ§åˆ¶æƒé™
   - å»ºè®®ï¼šä»…åœ¨å—ä¿¡ä»»çš„çŽ¯å¢ƒä¸­ä½¿ç”¨
   - ç”Ÿäº§çŽ¯å¢ƒè€ƒè™‘ä½¿ç”¨ Docker-in-Docker æˆ–æ›´ç»†ç²’åº¦çš„æƒé™æŽ§åˆ¶

2. **å®¹å™¨æƒé™**
   - Agent éœ€è¦è®¿é—® Docker daemon
   - ç¡®ä¿ Agent ç”¨æˆ·æœ‰è¶³å¤Ÿæƒé™ï¼ˆåŠ å…¥ docker ç»„æˆ–ä½¿ç”¨ rootï¼‰

### æ€§èƒ½è€ƒè™‘

1. **å®¹å™¨å¯åŠ¨å¼€é”€**
   - ç›¸æ¯”è¿›ç¨‹å¯åŠ¨ï¼Œå®¹å™¨å¯åŠ¨æœ‰é¢å¤–å¼€é”€ï¼ˆ~100-500msï¼‰
   - éœ€è¦è€ƒè™‘å†·å¯åŠ¨æ—¶é—´

2. **èµ„æºå¼€é”€**
   - æ¯ä¸ªå®¹å™¨æœ‰åŸºç¡€å†…å­˜å¼€é”€ï¼ˆ~10-50MBï¼‰
   - éœ€è¦è€ƒè™‘æ€»èµ„æºéœ€æ±‚

### å…¼å®¹æ€§

1. **å‘åŽå…¼å®¹**
   - é»˜è®¤ä½¿ç”¨è¿›ç¨‹æ¨¡å¼
   - ä¸å½±å“çŽ°æœ‰éƒ¨ç½²
   - å¯ä»¥é€æ­¥è¿ç§»åˆ°å®¹å™¨æ¨¡å¼

2. **è¿ç§»ç­–ç•¥**
   - å…ˆåœ¨æ–°éƒ¨ç½²ä¸­æµ‹è¯•å®¹å™¨æ¨¡å¼
   - é€æ­¥è¿ç§»çŽ°æœ‰åº”ç”¨åˆ°å®¹å™¨æ¨¡å¼
   - ä¸¤ç§æ¨¡å¼å¯ä»¥å¹¶å­˜

---

## ðŸ› æ•…éšœæŽ’æŸ¥

### é—®é¢˜1ï¼šAgent æ— æ³•è¿žæŽ¥ Controller

**ç—‡çŠ¶**ï¼š
```
Failed to get assignments: Get "http://plum-controller:8080/...": 
dial tcp: lookup plum-controller: no such host
```

**åŽŸå› **ï¼šAgent ä½¿ç”¨äº†å®¹å™¨çŽ¯å¢ƒçš„ä¸»æœºåï¼Œä½† Agent ä¸åœ¨å®¹å™¨ä¸­è¿è¡Œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä¿®æ”¹ .env æ–‡ä»¶æˆ–çŽ¯å¢ƒå˜é‡
CONTROLLER_BASE=http://127.0.0.1:8080  # æˆ–å®žé™…Controlleråœ°å€
```

### é—®é¢˜2ï¼šDocker æ¨¡å¼æ— æ³•å¯åŠ¨å®¹å™¨

**ç—‡çŠ¶**ï¼š
```
Failed to create docker manager: failed to connect to docker daemon
```

**åŽŸå› **ï¼š
- Docker daemon æœªè¿è¡Œ
- Agent æ— æƒé™è®¿é—® Docker socket

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. ç¡®è®¤Dockerè¿è¡Œ
sudo systemctl status docker

# 2. å¯åŠ¨Docker
sudo systemctl start docker

# 3. å°†ç”¨æˆ·åŠ å…¥dockerç»„
sudo usermod -aG docker $USER
# é‡æ–°ç™»å½•åŽç”Ÿæ•ˆ
```

### é—®é¢˜3ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
Failed to start container: ...
```

**å¯èƒ½åŽŸå› **ï¼š
- åŸºç¡€é•œåƒä¸å­˜åœ¨
- åº”ç”¨ç›®å½•æƒé™é—®é¢˜
- èµ„æºé™åˆ¶è¿‡å°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ‹‰å–åŸºç¡€é•œåƒ
docker pull alpine:latest

# 2. æ£€æŸ¥åº”ç”¨ç›®å½•æƒé™
ls -la /path/to/app

# 3. æ£€æŸ¥èµ„æºé™åˆ¶
# å¢žåŠ å†…å­˜æˆ–CPUé™åˆ¶
```

### é—®é¢˜4ï¼šå®¹å™¨åœæ­¢è¶…æ—¶

**ç—‡çŠ¶**ï¼šå®¹å™¨åœæ­¢å¾ˆæ…¢æˆ–æ— æ³•åœæ­¢

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥åº”ç”¨æ˜¯å¦æ­£ç¡®å¤„ç† SIGTERM ä¿¡å·
- å¢žåŠ åœæ­¢è¶…æ—¶æ—¶é—´ï¼ˆä¿®æ”¹ä»£ç ä¸­çš„ timeoutï¼‰
- æ£€æŸ¥å®¹å™¨å†…æ˜¯å¦æœ‰åƒµå°¸è¿›ç¨‹

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [å®¹å™¨æž¶æž„è®¾è®¡](../docs/CONTAINER_ARCHITECTURE.md) - è¯¦ç»†çš„æž¶æž„è®¾è®¡æ–‡æ¡£
- [Agent é…ç½®è¯´æ˜Ž](../agent-go/README.md) - Agent è¯¦ç»†é…ç½®
- [éƒ¨ç½²æŒ‡å—](../deploy/PRODUCTION_DEPLOYMENT.md) - ç”Ÿäº§çŽ¯å¢ƒéƒ¨ç½²æŒ‡å—
- [Docker Compose é…ç½®](../docker-compose.yml) - å®¹å™¨ç¼–æŽ’é…ç½®

---

## ðŸ”„ è¿ç§»æŒ‡å—

### ä»Žè¿›ç¨‹æ¨¡å¼è¿ç§»åˆ°å®¹å™¨æ¨¡å¼

1. **å‡†å¤‡å·¥ä½œ**
   ```bash
   # ç¡®è®¤Dockerå·²å®‰è£…å¹¶è¿è¡Œ
   docker --version
   sudo systemctl start docker
   ```

2. **é…ç½®æ›´æ”¹**
   ```bash
   # ä¿®æ”¹ agent-go/.env
   AGENT_RUN_MODE=docker
   PLUM_BASE_IMAGE=alpine:latest
   ```

3. **æµ‹è¯•éªŒè¯**
   ```bash
   # å¯åŠ¨Agent
   make agent
   AGENT_RUN_MODE=docker ./agent-go/plum-agent
   
   # åˆ›å»ºæµ‹è¯•éƒ¨ç½²
   # éªŒè¯åº”ç”¨æ˜¯å¦ä»¥å®¹å™¨æ–¹å¼è¿è¡Œ
   docker ps | grep plum-app-
   ```

4. **ç”Ÿäº§éƒ¨ç½²**
   - åœ¨æµ‹è¯•çŽ¯å¢ƒéªŒè¯æ— è¯¯åŽ
   - é€æ­¥è¿ç§»çŽ°æœ‰åº”ç”¨åˆ°å®¹å™¨æ¨¡å¼
   - ç›‘æŽ§èµ„æºä½¿ç”¨æƒ…å†µ

---

## ðŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | è¿›ç¨‹æ¨¡å¼ | å®¹å™¨æ¨¡å¼ |
|------|---------|---------|
| **å¯åŠ¨æ—¶é—´** | ~100ms | ~500ms |
| **å†…å­˜å¼€é”€** | ~5MB | ~15-50MB |
| **CPU å¼€é”€** | æœ€ä½Ž | ä½Žï¼ˆé¢å¤–~2-5%ï¼‰ |
| **èµ„æºéš”ç¦»** | æ—  | å®Œå–„ |
| **çŽ¯å¢ƒéš”ç¦»** | æ—  | å®Œå–„ |
| **å®‰å…¨æ€§** | ä¸­ç­‰ | é«˜ |

---

## âœ… æ€»ç»“

Plum é€šè¿‡åŒæ¨¡å¼åº”ç”¨ç®¡ç†æž¶æž„ï¼Œæä¾›äº†çµæ´»çš„åº”ç”¨éƒ¨ç½²æ–¹å¼ï¼š

1. **è£¸åº”ç”¨æ¨¡å¼**ï¼šç®€å•ã€å¿«é€Ÿï¼Œé€‚åˆå¼€å‘å’Œç®€å•éƒ¨ç½²
2. **æ··åˆå®¹å™¨æ¨¡å¼**ï¼šå¹³è¡¡æ€§èƒ½å’Œéš”ç¦»ï¼Œé€‚åˆéœ€è¦å®¹å™¨éš”ç¦»ä½†ä¿æŒç®€å•ç®¡ç†çš„åœºæ™¯
3. **å®Œå…¨å®¹å™¨åŒ–**ï¼šç”Ÿäº§å°±ç»ªï¼Œé€‚åˆäº‘åŽŸç”ŸçŽ¯å¢ƒ

æ ¹æ®å®žé™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹å¼ï¼Œå¯ä»¥å……åˆ†å‘æŒ¥ Plum çš„ä¼˜åŠ¿ï¼

